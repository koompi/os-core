# description	: Mozilla's JavaScript engine written in C
# depends	: gcc yasm icu nspr autoconf2.13 python2

name=js
version=78.5.0
release=1
source=(https://archive.mozilla.org/pub/firefox/releases/78.5.0esr/source/firefox-78.5.0esr.source.tar.xz)

build() {
	cd firefox-$version

	mkdir obj &&
    cd    obj &&

    export SHELL=/bin/sh

	CC=gcc CXX=g++ \
    ../js/src/configure --prefix=/usr            \
                        --with-intl-api          \
                        --with-system-zlib       \
                        --with-system-icu        \
                        --disable-jemalloc       \
                        --disable-debug-symbols  \
                        --enable-readline        

    make
	make DESTDIR=$PKG install
    rm $PKG/usr/lib/libjs_static.ajs
}